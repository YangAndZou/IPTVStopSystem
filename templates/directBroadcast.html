{% extends 'index.html' %}
{% block page-content %}
{% load static %}
    <div class="headTitle">直播一键关停</div>
    <div class="panel panel-default">
        <div class="panel-body">
            <ul id="myTab" class="nav nav-tabs">
                <li class="active"><a href="#programClose" data-toggle="tab">频道关停</a></li>
                <li><a href="#interfaceClose" data-toggle="tab">接口关停</a></li>

            </ul>
            <div id="myTabContent" class="tab-content">
                <div class="tab-pane fade in active" id="programClose">
                    <div class="query row">
                        <div class="form-group">
                            {% csrf_token %}
                            <label  class="col-lg-1 col-md-1 col-sm-2 control-label">频道名称:</label>
                            <div class="col-lg-2 col-md-2 col-sm-4">
                                <input type="text" class="form-control input-sm" id="program_name" name="program_name">
                            </div>
                            <label  class="col-lg-1 col-md-1 col-sm-2 control-label">频道IP:</label>
                            <div class="col-lg-2 col-md-2 col-sm-4">
                                <input type="text" class="form-control input-sm" id="program_ip" name="program_ip">
                            </div>
                            <label  class="col-lg-1 col-md-1 col-sm-2 control-label">状态:</label>
                            <div class="col-lg-2 col-md-2 col-sm-4">
                                <select class="selectpicker"
                                        id="status"
                                        name="status"
                                        data-none-selected-text="请选择"
                                        data-width="100%">
                                    <option name="status" value="0">全部</option>
                                    <option name="status" value="1">关停</option>
                                    <option name="status" value="2">开启</option>
                                </select>
                                <!--<input type="text" class="form-control input-sm" id="status" name="status">-->
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-12">
                                <button class="btn-primary btn btn-sm" type="submit"  id="submitprogram" name="" onclick="sumbitQuery()">查询</button>
                                &nbsp;
                                <button class="btn-info btn btn-sm" onclick="location.reload()" type="reset" name="">重置</button>
                            </div>
                        </div>
                    </div>
                    <table id="dataTableList"
                           class="table table-striped  table-hover "
                           style="word-break:break-all;">
                        <thead>
                        <tr>
                            <th>
                                <input type="checkbox" class="icheckbox_all" name="icheckbox_all" id="all_checked">
                            </th>
                            <th>频道名称</th>
                            <th>频道描述</th>
                            <th>控制路由组</th>
                            <th>频道ip</th>
                            <th>频道状态</th>
                            <th>策略id</th>
                            <th>操作</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for ds in programs %}
                        <tr>
                            <td><input type ='checkbox' name='test' class='icheckbox_minimal' value=''></td>
                            <td class="center">{{ ds.program_name }}</td>
                            <td class="center">{{ ds.program_desc }}</td>
                            <td class="center">{{ ds.router.router_name }}</td>
                            <td class="center">{{ ds.program_ip }}</td>
                            <td class="center">
                                {% if ds.status == 1 %}
                                <i class="closeCircle"></i>
                                {% elif ds.status == 2 %}
                                <i class="openCircle"></i>
                                {% endif %}
                            </td>
                            <td class="center">{{ ds.strategy }}</td>
                            <td class="center">
                                {% if ds.status == 1 %}
                                <button class="btn btn-success btn-xs" onclick="turnFn('turn_on','{{ ds.program_ip }}',0)">开启</button>
                                {% elif ds.status == 2 %}
                                <button class="btn btn-danger btn-xs" onclick="turnFn('turn_off','{{ ds.program_ip }}',0)">关停</button>
                                {% endif %}
                                &nbsp;
                                <button class="btn btn-info btn-xs">检测</button>
                            </td>
                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="tab-pane fade" id="interfaceClose">

                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="regionDialog" tabindex="-1" role="dialog" aria-labelledby="regionModalLabel"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="regionModalLabel">修改代理配置</h4>
            </div>
            <div class="modal-body">
                <form  class="main form-horizontal">
                    {% csrf_token %}
                    <div class="form-group">
                        <label class="col-sm-4 control-label">平台</label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control" name="username" required/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label">选择大区</label>
                        <div class="col-sm-6">
                            <input type="text" class="form-control"  name="email" required/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label">大区IP地址列表<span
                                style="color:red;"> *</span></label>
                        <div class="col-sm-6">

                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary">保存</button>
            </div>
        </div>
    </div>

</div>
<script>
    var token='{{ csrf_token }}';
</script>
    <script src="{% static 'js/directBroadcast.js' %}"></script>
{% endblock %}